<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>ptimeout by guillon</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">ptimeout</h1>
        <p class="header">A timeout command with process garbage collection</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/guillon/ptimeout/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/guillon/ptimeout/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/guillon/ptimeout">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/guillon">guillon</a></p>


      </header>
      <section>
        <p><a href="https://travis-ci.org/guillon/repo-mirror/branches"><img src="https://api.travis-ci.org/guillon/ptimeout.png?branch=master" alt="Build Status"></a></p>

<h1>
<a id="synopsys" class="anchor" href="#synopsys" aria-hidden="true"><span class="octicon octicon-link"></span></a>Synopsys</h1>

<p>The ptimeout utility is a python script implementing an interface similar to
GNU timeout with the additional ability to terminate all processes launched
from the timeout session.</p>

<p>In order to terminate all processes launched as part of the timeout
session, an environment variable is propagated along with processes creation.</p>

<p>This heuristic enables terminations of detached processes even when
they are not anymore in the process parent-child tree.</p>

<p>This also avoids the usage of process groups or process session leadership
which have some undesirable effect observed with timeout tools provided
with standard distributions. This approach is thus more transparent w.r.t.
to overall process management.</p>

<p>The limitation to this approach is when some process reset its environment,
in which case it will not be tracked anymore (nor any of its child) by
the termination heuristic. In this case the sub-process tree may not
terminate as part of the timeout session.</p>

<h1>
<a id="download" class="anchor" href="#download" aria-hidden="true"><span class="octicon octicon-link"></span></a>Download</h1>

<p>Download the last stable version of the script from there:
<a href="https://raw.githubusercontent.com/guillon/ptimeout/master/ptimeout">https://raw.githubusercontent.com/guillon/ptimeout/master/ptimeout</a></p>

<h1>
<a id="examples" class="anchor" href="#examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>Examples</h1>

<p>A typical usage of such a tool if for limiting the time of a batch job
which may fall into non terminating condition such as in validation
scripts or test processes.</p>

<p>Also one generally expect the whole set of executed processes as part of
the job lifetime to be teminated when the job terminates, hence the
termination heuristic.</p>

<p>Example of usage for limiting a batch script to 1 hour duration:</p>

<pre><code>$ ptimeout 3600 -- script.sh
</code></pre>

<p>By default script.sh and all process executed from its process tree will
be terminated with SIGTERM after 3600 seconds, or killed by SIGKILL 10
seconds after if still persistent.</p>

<p>If one wants only process garbage collection, use a timeout of 0 as in:</p>

<pre><code>$ ptimeout 0 -- script.sh
</code></pre>

<p>In this case, the tool will not bound the execution time, but will still
garbage collect all processes when receiving an interrupting signal.</p>

<p>The usage of ptimeout can be recursive and there is not side effect with
respect to interactive/sessions/tty modes.</p>

<p>Get the command line help with:</p>

<pre><code>$ ptimeout --help
usage: ptimeout [-h] [-v] [-d] [-s SIGNAL] [-k KILL_AFTER] [-c CATCH_SIGNALS]
            [-l LIST] [-f FORMAT]
            [duration] [command] ...
....
</code></pre>

<h1>
<a id="build-and-install" class="anchor" href="#build-and-install" aria-hidden="true"><span class="octicon octicon-link"></span></a>Build and Install</h1>

<p>This script requires python 2.6.x.</p>

<p>The script can be used directly without installation.</p>

<p>A makefile is provided anyway for completion and testing purpose.</p>

<p>Build with:</p>

<pre><code>$ make all # a no-op actually
</code></pre>

<p>Run unittests with:</p>

<pre><code>$ make check
</code></pre>

<p>Install with, for instance:</p>

<pre><code>$ make install PREFIX=$HOME/local  # Default is PREFIX=/usr/local
</code></pre>

<h1>
<a id="references" class="anchor" href="#references" aria-hidden="true"><span class="octicon octicon-link"></span></a>References</h1>

<p>Refer to the project home page at:
<a href="http://guillon.github.com/ptimeout">http://guillon.github.com/ptimeout</a></p>

<p>Refer to the current build and validation status at:
<a href="https://travis-ci.org/guillon/ptimeout?branches">https://travis-ci.org/guillon/ptimeout?branches</a></p>

<p>Fill issues and enhancement request at:
<a href="https://github.com/guillon/ptimeout/issues">https://github.com/guillon/ptimeout/issues</a></p>

<h1>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h1>

<p>Refer to the COPYING file: <a href="https://github.com/guillon/ptimeout/blob/master/COPYING">https://github.com/guillon/ptimeout/blob/master/COPYING</a>
Refer to the COPYRIGHT file: <a href="https://github.com/guillon/ptimeout/blob/master/COPYRIGHT">https://github.com/guillon/ptimeout/blob/master/COPYRIGHT</a></p>
      </section>
      <footer>
        <p><small>Hosted on <a href="https://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		          <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-50872352-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
