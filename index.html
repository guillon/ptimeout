<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>ptimeout by guillon</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>ptimeout <div class="g-plusone" data-annotation="inline" data-width="300"></div></h1>
          <h2>A timeout command with process garbage collection
            <a href="https://buildhive.cloudbees.com/job/guillon/job/ptimeout">
	      <img src="https://buildhive.cloudbees.com/job/guillon/job/ptimeout/badge/icon"
		   alt="Build status" width=120/></a></h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/guillon/ptimeout/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/guillon/ptimeout/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/guillon/ptimeout" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>
<a name="synopsys" class="anchor" href="#synopsys"><span class="octicon octicon-link"></span></a>Synopsys</h1>

<p>The ptimeout utility is a python script implementing an interface similar to
GNU timeout with the additional ability to terminate all processes launched
from the timeout session.</p>

<p>In order to terminate all processes launched as part of the timeout
session, an environment variable is propagated along with processes creation.</p>

<p>This heuristic enables terminations of detached processes even when
they are not anymore in the process parent-child tree.</p>

<p>This also avoids the usage of process groups or process session leadership
which have some undesirable effect observed with timeout tools provided
with standard distributions. This approach is thus more transparent w.r.t.
to overall process management.</p>

<p>The limitation to this approach is when some process reset its environment,
in which case it will not be tracked anymore (nor any of its child) by
the termination heuristic. In this case the sub-process tree may not
terminate as part of the timeout session.</p>

<h1>
<a name="download" class="anchor" href="#download"><span class="octicon octicon-link"></span></a>Download</h1>

<p>Download the last stable version of the script from there:
<a href="https://raw.githubusercontent.com/guillon/ptimeout/master/ptimeout">https://raw.githubusercontent.com/guillon/ptimeout/master/ptimeout</a></p>

<h1>
<a name="examples" class="anchor" href="#examples"><span class="octicon octicon-link"></span></a>Examples</h1>

<p>A typical usage of such a tool if for limiting the time of a batch job
which may fall into non terminating condition such as in validation
scripts or test processes.</p>

<p>Also one generally expect the whole set of executed processes as part of
the job lifetime to be teminated when the job terminates, hence the
termination heuristic.</p>

<p>Example of usage for limiting a batch script to 1 hour duration:</p>

<pre><code>$ ptimeout 3600 script.sh
</code></pre>

<p>By default script.sh and all process executed from its process tree will
be terminated with SIGTERM after 3600 seconds, or killed by SIGKILL 10
seconds after if still persistent.</p>

<p>The usage of ptimeout can be recursive and there is not side effect with
respect to interactive/sessions/tty modes.</p>

<p>Get the command line help with:</p>

<pre><code>$ ptimeout --help
usage: ptimeout [-h] [-v] [-d] [-s SIGNAL] [-k KILL_AFTER] [-c CATCH_SIGNALS]
            [-l LIST] [-f FORMAT]
            [duration] [command] ...
....
</code></pre>

<h1>
<a name="build-and-install" class="anchor" href="#build-and-install"><span class="octicon octicon-link"></span></a>Build and Install</h1>

<p>This script requires python 2.6.x.</p>

<p>The script can be used directly without installation.</p>

<p>A makefile is provided anyway for completion and testing purpose.</p>

<p>Build with:</p>

<pre><code>$ make all # a no-op actually
</code></pre>

<p>Run unittests with:</p>

<pre><code>$ make check
</code></pre>

<p>Install with, for instance:</p>

<pre><code>$ make install PREFIX=$HOME/local  # Default is PREFIX=/usr/local
</code></pre>

<h1>
<a name="references" class="anchor" href="#references"><span class="octicon octicon-link"></span></a>References</h1>

<p>Refer to the project home page at:
<a href="http://guillon.github.com/ptimeout">http://guillon.github.com/ptimeout</a></p>

<p>Refer to the current build and validation status at:
<a href="https://buildhive.cloudbees.com/job/guillon/job/ptimeout">https://buildhive.cloudbees.com/job/guillon/job/ptimeout</a></p>

<p>Fill issues and enhancement request at:
<a href="https://github.com/guillon/ptimeout/issues">https://github.com/guillon/ptimeout/issues</a></p>

<h1>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>License</h1>

<p>Refer to the COPYING file: <a href="https://github.com/guillon/ptimeout/blob/master/COPYING">https://github.com/guillon/ptimeout/blob/master/COPYING</a>
Refer to the COPYRIGHT file: <a href="https://github.com/guillon/ptimeout/blob/master/COPYRIGHT">https://github.com/guillon/ptimeout/blob/master/COPYRIGHT</a></p>
        </section>

        <footer>
          ptimeout is maintained by <a href="https://github.com/guillon">guillon</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
<!-- Place this tag after the last +1 button tag. -->
<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>

  <!-- Google analytics script. -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-50872352-1', 'github.com');
  ga('send', 'pageview');

</script>
      </div>
    </div>
  </body>
</html>
